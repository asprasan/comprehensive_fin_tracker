<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Expense Tracker</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <h1>üí∞ Complete Expense Tracker</h1>
                <div class="date-controls">
                    <select id="monthSelect" class="form-control">
                        <option value="0">January</option>
                        <option value="1">February</option>
                        <option value="2">March</option>
                        <option value="3">April</option>
                        <option value="4">May</option>
                        <option value="5">June</option>
                        <option value="6">July</option>
                        <option value="7">August</option>
                        <option value="8" selected>September</option>
                        <option value="9">October</option>
                        <option value="10">November</option>
                        <option value="11">December</option>
                    </select>
                    <select id="yearSelect" class="form-control">
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025" selected>2025</option>
                        <option value="2026">2026</option>
                    </select>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tab-nav">
            <div class="container">
                <button class="tab-btn active" data-tab="monthly">Monthly View</button>
                <button class="tab-btn" data-tab="annual">Annual Summary</button>
                <button class="tab-btn" data-tab="currency">Currency Settings</button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Monthly View Tab -->
                <div id="monthlyTab" class="tab-content active">
                    <div class="monthly-header">
                        <div class="totals-overview">
                            <div class="total-card">
                                <div class="total-label">Total Budget</div>
                                <div id="totalBudget" class="total-amount clickable">‚Ç¨400.00</div>
                            </div>
                            <div class="total-card">
                                <div class="total-label">Total Spent</div>
                                <div id="totalSpent" class="total-amount">‚Ç¨0.00</div>
                            </div>
                            <div class="total-card">
                                <div class="total-label">Remaining</div>
                                <div id="totalRemaining" class="total-amount">‚Ç¨400.00</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button id="setBudgetsBtn" class="btn btn--primary">‚öôÔ∏è Set All Budgets</button>
                            <button id="addExpenseBtn" class="btn btn--primary">‚ûï Add Expense</button>
                            <button id="bulkAddBtn" class="btn btn--secondary">üìù Add Expenses</button>
                        </div>
                    </div>

                    <div class="data-actions">
                        <button id="exportBtn" class="btn btn--outline">üì• Export Monthly</button>
                        <label class="btn btn--outline">
                            üì§ Import Data
                            <input type="file" id="importFile" accept=".json" style="display: none;">
                        </label>
                    </div>

                    <div class="categories-grid" id="categoriesGrid">
                        <!-- Categories will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Annual Summary Tab -->
                <div id="annualTab" class="tab-content">
                    <div class="annual-header">
                        <h2>Annual Summary - <span id="currentYear">2025</span></h2>
                        <div class="annual-actions">
                            <button id="exportAnnualBtn" class="btn btn--primary">üì• Export Annual Data</button>
                        </div>
                    </div>

                    <div class="summary-cards">
                        <div class="summary-card">
                            <div class="summary-label">Total Spent</div>
                            <div id="annualTotalSpent" class="summary-value">‚Ç¨0.00</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-label">Average Monthly</div>
                            <div id="annualAverage" class="summary-value">‚Ç¨0.00</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-label">Highest Month</div>
                            <div id="annualHighest" class="summary-value">‚Ç¨0.00</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-label">Top Category</div>
                            <div id="topCategory" class="summary-value">None</div>
                        </div>
                    </div>

                    <div class="annual-content">
                        <div class="annual-tables">
                            <div class="table-container">
                                <h3>Monthly Breakdown</h3>
                                <table id="monthlyBreakdown" class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Month</th>
                                            <th>Total</th>
                                            <th>Budget</th>
                                            <th>Over/Under</th>
                                            <th>Cumulative Over/Under</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>

                            <div class="table-container">
                                <h3>Category Breakdown</h3>
                                <table id="categoryBreakdown" class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Category</th>
                                            <th>Total</th>
                                            <th>Budget</th>
                                            <th>Over/Under</th>
                                            <th>Avg Monthly</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="charts-container">
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="monthlyTrendChart"></canvas>
                            </div>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="categoryDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Currency Settings Tab -->
                <div id="currencyTab" class="tab-content">
                    <div class="currency-header">
                        <h2>Currency Settings</h2>
                    </div>
                    
                    <div class="currency-content">
                        <div class="card">
                            <div class="card__body">
                                <div class="form-group">
                                    <label class="form-label">EUR to INR Conversion Rate</label>
                                    <input type="number" id="conversionRate" class="form-control" value="90" step="0.01" min="0">
                                    <small class="form-help">Enter current EUR to INR exchange rate</small>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Default Currency</label>
                                    <select id="defaultCurrency" class="form-control">
                                        <option value="EUR" selected>EUR (‚Ç¨)</option>
                                        <option value="INR">INR (‚Çπ)</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Last Updated</label>
                                    <input type="text" id="lastUpdated" class="form-control" readonly>
                                </div>
                                
                                <button id="saveCurrencyBtn" class="btn btn--primary">Save Settings</button>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card__body">
                                <h3>Currency Converter</h3>
                                <div class="converter-row">
                                    <div class="form-group">
                                        <label class="form-label">Amount</label>
                                        <input type="number" id="converterAmount" class="form-control" step="0.01">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">From</label>
                                        <select id="converterFrom" class="form-control">
                                            <option value="EUR">EUR</option>
                                            <option value="INR">INR</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">To</label>
                                        <select id="converterTo" class="form-control">
                                            <option value="INR">INR</option>
                                            <option value="EUR">EUR</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Result</label>
                                        <input type="text" id="converterResult" class="form-control" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Single Expense Modal -->
    <div id="expenseModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="expenseModalTitle">Add New Expense</h2>
                <button class="close-btn" id="closeExpenseModal">√ó</button>
            </div>
            <form id="expenseForm" class="modal-body">
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select id="categorySelect" class="form-control" required>
                        <option value="">Select category...</option>
                        <option value="groceries">üõí Groceries</option>
                        <option value="lifestyle">üéâ Lifestyle</option>
                        <option value="once-in-a-while">‚è∞ Once-in-a-while Items</option>
                        <option value="unexpected">‚ùó Unexpected</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Date <span class="required">*</span></label>
                        <input type="date" id="dateInput" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Price <span class="required">*</span></label>
                        <div class="price-input">
                            <input type="number" id="priceInput" class="form-control" step="0.01" min="0" required>
                            <select id="currencySelect" class="form-control">
                                <option value="EUR">EUR</option>
                                <option value="INR">INR</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Store</label>
                    <input type="text" id="storeInput" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">Item</label>
                    <input type="text" id="itemInput" class="form-control">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Quantity</label>
                        <input type="number" id="quantityInput" class="form-control" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Unit</label>
                        <input type="text" id="unitInput" class="form-control">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--outline" id="cancelExpense">Cancel</button>
                    <button type="submit" class="btn btn--primary">Save Expense</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bulk Expense Modal -->
    <div id="bulkExpenseModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content bulk-modal">
            <div class="modal-header">
                <h2>Add Multiple Expenses</h2>
                <button class="close-btn" id="closeBulkModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="bulk-instructions">
                    <p>Fill in expenses below. <span class="required">Date*</span> and <span class="required">Price*</span> are required.</p>
                </div>
                <div class="bulk-table-container">
                    <table id="bulkExpenseTable" class="bulk-table">
                        <thead>
                            <tr>
                                <th>Date <span class="required">*</span></th>
                                <th>Price <span class="required">*</span></th>
                                <th>Currency</th>
                                <th>Category</th>
                                <th>Store</th>
                                <th>Item</th>
                                <th>Qty</th>
                                <th>Unit</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="bulkTableBody">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div class="bulk-actions">
                    <button type="button" id="addRowBtn" class="btn btn--outline">+ Add Row</button>
                    <button type="button" id="removeRowBtn" class="btn btn--outline">- Remove Row</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--outline" id="cancelBulk">Cancel</button>
                    <button type="button" class="btn btn--primary" id="saveBulkExpenses">Save All Expenses</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Budget Settings Modal -->
    <div id="budgetModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Monthly Budgets</h2>
                <button class="close-btn" id="closeBudgetModal">√ó</button>
            </div>
            <form id="budgetForm" class="modal-body">
                <div id="budgetInputs">
                    <!-- Populated by JavaScript -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--outline" id="cancelBudget">Cancel</button>
                    <button type="submit" class="btn btn--primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Message Toast -->
    <div id="messageToast" class="toast hidden">
        <div id="messageContent"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>